replicaCount: 1

image:
  repository: ghcr.io/ogulcanaydogan/sovereign-rag-gateway
  tag: latest
  pullPolicy: IfNotPresent

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

rbac:
  create: false

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "8000"
  prometheus.io/path: "/metrics"
podLabels: {}

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 10001
  runAsGroup: 10001
  fsGroup: 10001

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: false
  capabilities:
    drop:
      - ALL

service:
  type: ClusterIP
  port: 80
  targetPort: 8000

resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 70

env:
  apiKeys:
    - dev-key
  env: dev
  defaultModel: gpt-4o-mini
  modelCatalog: gpt-4o-mini,text-embedding-3-small
  providerName: stub
  opaMode: enforce
  redactionEnabled: true
  ragEnabled: true
  ragAllowedConnectors: filesystem
  ragSharepointBaseUrl: https://graph.microsoft.com/v1.0
  ragSharepointSiteId: ""
  ragSharepointDriveId: ""
  ragSharepointAuthMode: bearer_token
  ragSharepointBearerToken: ""
  ragSharepointManagedIdentityEndpoint: http://169.254.169.254/metadata/identity/oauth2/token
  ragSharepointManagedIdentityResource: https://graph.microsoft.com/
  ragSharepointManagedIdentityApiVersion: "2018-02-01"
  ragSharepointManagedIdentityClientId: ""
  ragSharepointManagedIdentityTimeoutS: 3.0
  ragSharepointAllowedPathPrefixes: ""
  ragSharepointCacheTtlSeconds: 60.0
  logLevel: INFO
  auditLogPath: /tmp/audit/events.jsonl
  metricsEnabled: true
  providerFallbackEnabled: true
  budgetEnabled: false
  budgetDefaultCeiling: 100000
  budgetWindowSeconds: 3600
  budgetTenantCeilings: ""
  budgetBackend: memory
  budgetRedisUrl: ""
  budgetRedisPrefix: srg:budget
  budgetRedisTtlSeconds: 7200
  webhookEnabled: false
  webhookEndpoints: "[]"
  webhookTimeoutS: 5.0
  webhookMaxRetries: 1
  webhookBackoffBaseS: 0.2
  webhookBackoffMaxS: 2.0
  webhookDeadLetterBackend: sqlite
  webhookDeadLetterPath: /tmp/audit/webhook_dead_letter.db
  webhookDeadLetterRetentionDays: 30
  tracingEnabled: false
  tracingMaxTraces: 1000
  tracingOtlpEnabled: false
  tracingOtlpEndpoint: ""
  tracingOtlpTimeoutS: 2.0
  tracingOtlpHeaders: ""
  tracingServiceName: sovereign-rag-gateway

probes:
  liveness:
    path: /healthz
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 2
  readiness:
    path: /readyz
    initialDelaySeconds: 3
    periodSeconds: 5
    timeoutSeconds: 2

networkPolicy:
  enabled: true
  allowIngressFromSameNamespace: true
  allowDNS: true
  extraEgressCIDRs: []

nodeSelector: {}
tolerations: []
affinity: {}
