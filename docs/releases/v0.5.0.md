# v0.5.0 Release Notes

Release date: 2026-02-20

## Highlights

- GA release of streaming budget enforcement with mid-stream token checks.
- Comprehensive resilience/chaos test suite proving fail-closed guarantees under 8 failure scenarios.
- All features from v0.5.0-alpha.1 (SharePoint connector, webhook replay CLI, benchmark trends) promoted to GA.

## New Features

### Streaming Budget Enforcement
- `TokenBudgetTracker.check_running()` and `RedisTokenBudgetTracker.check_running()`:
  non-throwing boolean check for hot-path streaming use.
- Streaming loop checks budget every 5 chunks and terminates with
  `finish_reason: "length"` if ceiling exceeded mid-stream.
- Redis `check_running()` returns `False` (fail-closed) when backend unavailable.
- New optional audit event field: `budget_mid_stream_terminated` (boolean).

### Resilience Test Suite
- 8 chaos scenarios covering cascading failure modes.
- Proves fail-closed behavior for policy, budget, and audit subsystems.
- Added `error-timeout-stream` stub model for streaming provider error simulation.

### Enterprise Retrieval (from alpha)
- SharePoint read-only connector via Microsoft Graph with drive scoping and path prefix controls.
- Webhook dead-letter replay CLI with deterministic idempotency and replay reporting.
- Benchmark trend regression gate with checked-in governance baseline.

## Contracts and Compatibility

- New optional audit event field: `budget_mid_stream_terminated` (boolean).
- All existing API contracts remain stable and backward-compatible.

## Validation Summary

- Local quality gates: ruff, mypy, pytest all pass.
- Contract/schema validation passes.
- Version sync check passes across pyproject.toml, app/main.py, and CHANGELOG.md.

## Known Limitations

- Mid-stream budget check interval is fixed at 5 chunks (not configurable).
- Budget check-and-record is not atomic (TOCTOU window exists under extreme concurrency).
- Token estimation uses word-count approximation, not BPE tokenization.
