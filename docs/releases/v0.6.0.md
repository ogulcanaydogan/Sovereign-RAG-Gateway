# v0.6.0 Release Notes

`v0.6.0` promotes the `v0.6.0-alpha.1` hardening work to GA and keeps API/contract behavior stable for existing `v0.5.x` users.

## Highlights

- Provider parity matrix enforced in CI release gating with persisted artifacts.
- Webhook dead-letter durability defaults hardened (`sqlite`, retention pruning, replay compatibility).
- Webhook replay/retention metrics surfaced in Grafana dashboard assets.
- Weekly evidence reporting automated (workflow + report index maintenance).
- SharePoint connector supports managed-identity authentication mode in addition to bearer-token mode.

## Included Components

- Provider parity gating:
  - `.github/workflows/ci.yml`
  - `scripts/provider_parity_matrix.py`
- Weekly evidence automation:
  - `.github/workflows/weekly-evidence-report.yml`
  - `scripts/generate_weekly_evidence_report.py`
  - `scripts/update_weekly_reports_index.py`
- Runtime-controls durability:
  - `app/webhooks/dead_letter_store.py`
  - `scripts/replay_webhook_dead_letter.py`
- SharePoint managed identity:
  - `app/rag/connectors/sharepoint.py`
  - `docs/operations/sharepoint-connector.md`
- Dashboard panels:
  - `deploy/observability/grafana-dashboard-configmap.yaml`

## Migration Notes from v0.5.x

### 1) SharePoint Auth Mode Is Explicit

`v0.6.0` introduces explicit auth mode selection:

```bash
SRG_RAG_SHAREPOINT_AUTH_MODE=bearer_token # bearer_token|managed_identity
```

Bearer-token mode remains backward-compatible:

```bash
SRG_RAG_SHAREPOINT_BEARER_TOKEN=<graph-api-token>
```

Managed-identity mode (tokenless runtime credential path):

```bash
SRG_RAG_SHAREPOINT_AUTH_MODE=managed_identity
SRG_RAG_SHAREPOINT_MANAGED_IDENTITY_ENDPOINT=http://169.254.169.254/metadata/identity/oauth2/token
SRG_RAG_SHAREPOINT_MANAGED_IDENTITY_RESOURCE=https://graph.microsoft.com/
SRG_RAG_SHAREPOINT_MANAGED_IDENTITY_API_VERSION=2018-02-01
SRG_RAG_SHAREPOINT_MANAGED_IDENTITY_CLIENT_ID=<optional-user-assigned-client-id>
SRG_RAG_SHAREPOINT_MANAGED_IDENTITY_TIMEOUT_S=3.0
```

### 2) Webhook Dead-letter Defaults

Durable default remains:

```bash
SRG_WEBHOOK_DEAD_LETTER_BACKEND=sqlite
SRG_WEBHOOK_DEAD_LETTER_PATH=artifacts/audit/webhook_dead_letter.db
SRG_WEBHOOK_DEAD_LETTER_RETENTION_DAYS=30
```

Replay CLI supports both `sqlite` and `jsonl`:

```bash
python scripts/replay_webhook_dead_letter.py \
  --dead-letter artifacts/audit/webhook_dead_letter.db \
  --dead-letter-backend sqlite \
  --report-out artifacts/audit/webhook_replay_report.json
```

### 3) Evidence Automation and Reports

Weekly reporting path:

- `.github/workflows/weekly-evidence-report.yml`
- `docs/benchmarks/reports/weekly-YYYY-MM-DD.md`
- `docs/benchmarks/reports/index.md`

## Compatibility

- No breaking API changes in OpenAI-compatible endpoints.
- Existing audit/event contracts remain backward-compatible.
- Existing `v0.5.x` configs continue to work with optional additions for managed identity and dashboard coverage.

## Known Limitations

- Managed-identity flow assumes Azure IMDS-compatible token endpoint behavior.
- Weekly evidence workflow may not open PRs automatically in repositories where Actions PR creation is restricted; report generation still succeeds.
