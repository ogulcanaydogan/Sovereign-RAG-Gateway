# v0.4.0 Release Notes

Release date: 2026-02-19

## Highlights

- GA release of runtime governance controls:
  - response redaction on chat and streaming output paths
  - per-tenant token budget enforcement (`429 budget_exceeded`)
  - non-blocking webhook notifications for governance events
  - request-level tracing diagnostics at `GET /v1/traces/{request_id}`
- Terraform EKS reference module and validation workflow are included in GA.

## Post-RC Hardening Included in GA

- Added OTLP/HTTP trace export support while preserving in-memory diagnostics.
- Added distributed budget backend option (`memory` or `redis`) with deterministic
  backend-unavailable handling.
- Added webhook delivery hardening:
  - exponential retry backoff for retryable failures
  - idempotency key header (`X-SRG-Idempotency-Key`)
  - dead-letter JSONL output for failed deliveries
- Expanded benchmark scenarios with fault-injection modes:
  - `policy_outage_fail_closed`
  - `provider_429_storm`
  - `connector_timeout`

## Contracts and Compatibility

- Error envelope remains stable:
  - `error.code`
  - `error.message`
  - `error.type`
  - `error.request_id`
- Audit event contract additions remain optional and backward-compatible:
  - `trace_id`
  - `budget`
  - `webhook_events`
  - `input_redaction_count`
  - `output_redaction_count`

## Validation Summary

- Local quality gates:
  - `ruff` passed
  - `mypy` passed
  - `pytest` passed
  - contract/schema validation passed
  - benchmark threshold checks passed
  - terraform `fmt` and `validate` passed

## Known Limitations

- Webhook delivery is best-effort and does not block request paths.
- Trace retention remains in-memory for diagnostics; OTLP export is optional and
  best-effort.
- Redis budget backend requires runtime Redis availability and package support.
